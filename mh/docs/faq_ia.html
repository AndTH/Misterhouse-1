<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Internet Appliances with MisterHouse FAQ</title>
<link rev="made" href="mailto:" />
</head>

<body style="background-color: white">

<p><a name="__index__"></a></p>
<!-- INDEX BEGIN -->

<ul>

	<li><a href="#internet_appliances_with_misterhouse_faq">Internet Appliances with MisterHouse FAQ</a></li>
	<li><a href="#what_is_an_internet_appliance">What is an internet appliance</a></li>
	<li><a href="#what_is_an_epod">What is an epod</a></li>
	<li><a href="#what_is_an_audrey">What is an Audrey</a></li>
	<ul>

		<li><a href="#some_common_hacks">Some common hacks</a></li>
		<li><a href="#remote_audrey_browsing_and_control">Remote Audrey browsing and control</a></li>
		<li><a href="#how_to_boot_audrey_to_a_mh_page">How to boot Audrey to a mh page</a></li>
		<li><a href="#how_to_stop_the_audrey_from_autoupating">How to stop the Audrey from auto-upating</a></li>
		<li><a href="#how_to_share_files">How to share files</a></li>
		<li><a href="#how_to_play_mp3_files">How to play mp3 files</a></li>
		<li><a href="#how_to_push_speech_to_remote_audreys">How to push speech to remote Audreys</a></li>
	</ul>

</ul>
<!-- INDEX END -->

<hr />
<p>
</p>
<hr />
<h1><a name="internet_appliances_with_misterhouse_faq">Internet Appliances with MisterHouse FAQ</a></h1>
<p>This will try to cover info and tips on using various internet appliances
like the Epods and Audrey with MisterHouse.</p>
<p>
</p>
<hr />
<h1><a name="what_is_an_internet_appliance">What is an internet appliance</a></h1>
<p>A broad term used to cover any thing cheaper than a computer that hooks up 
to an ethernet port.  A couple of examples:</p>
<pre>
 - Web browsers used as touch screens
 - Ethernet connected MP3 players
 - Internet radios</pre>
<p>
</p>
<hr />
<h1><a name="what_is_an_epod">What is an epod</a></h1>
<p>An epod is a hacked WinCE webpad. 640x480 color
touchpad display, 16MB memory, cf and pcmcia slot. I connect mine wirelessly
using a D-Link card/access point. Epods are selling for about $300 on EBay.
Check out:</p>
<pre>
  <a href="http://www.geocities.com/epodsfiles/">http://www.geocities.com/epodsfiles/</a>
  <a href="http://www.linux-hacker.net/cgi-bin/UltraBoard/UltraBoard.pl?Action=ShowBoard&amp;Board=EpodsOne">http://www.linux-hacker.net/cgi-bin/UltraBoard/UltraBoard.pl?Action=ShowBoard&amp;Board=EpodsOne</a></pre>
<p>
</p>
<hr />
<h1><a name="what_is_an_audrey">What is an Audrey</a></h1>
<p>In Fall of 2001, the discontinued 3Com Audrey were being liquidated 
by tigerdirect.com for $90 (originally $500).  With a 640x480 LCD
touchscreen, it makes for a nice web appliance / touch control pannel.</p>
<p>Here are some helpful links:</p>
<pre>
 Order: <a href="http://www.tigerdirect.com/applications/SearchTools/item-details.asp?sku=M975-9000%20P">http://www.tigerdirect.com/applications/SearchTools/item-details.asp?sku=M975-9000%20P</a>
 Hack:  <a href="http://www.audreyhacking.com/">http://www.audreyhacking.com/</a>
 Ether: <a href="http://www.ppetru.net/audrey/#ether">http://www.ppetru.net/audrey/#ether</a>
 Faq:   <a href="http://www.3rdmoon.com/crusso/audrey/">http://www.3rdmoon.com/crusso/audrey/</a>
 List:  <a href="http://www.linux-hacker.net/cgi-bin/UltraBoard/UltraBoard.pl?Action=ShowBoard&amp;Board=3Com_Audrey&amp;Idle">http://www.linux-hacker.net/cgi-bin/UltraBoard/UltraBoard.pl?Action=ShowBoard&amp;Board=3Com_Audrey&amp;Idle</a>
 OS:    <a href="http://www.openqnx.com/">http://www.openqnx.com/</a></pre>
<p>Pete Flaherty posted a mh compatable Audrey image at <a href="http://vsa.cape.com/~pjf/MrAudrey.html">http://vsa.cape.com/~pjf/MrAudrey.html</a></p>
<p>
</p>
<h2><a name="some_common_hacks">Some common hacks</a></h2>
<p>Here are some common/useful hacks (edit these file to these values):</p>
<pre>
  echo 1 &gt; /config/BROWSER_AllowNewWindow
  echo 0 &gt; /config/SYSTEM_ScreenSaveSecs  (disable auto-shutdown)</pre>
<p>To improve color resolution (do this on boot, before browser starts)
  echo 0 &gt; /config/BROWSER_Use256Colors</p>
<p>If you press the Browser button while the browser is already visible, the menu will slide away.</p>
<p>You may want to increase the size on these:</p>
<pre>
 /config/BROWSER_ImageCacheSizeKB 2048 (Had problems increasing this to 20000)
 /config/BROWSER_CacheSize        5000 (I changed to 50000</pre>
<p>Here are some instructions to allow turning the screen on/off remotely:</p>
<pre>
 <a href="http://homepage.mac.com/deandavis/audrey/AudreyOnOff.html">http://homepage.mac.com/deandavis/audrey/AudreyOnOff.html</a></pre>
<p>Note, the above simply turns the screen off.  Not quite the same as the power button 
which also disable browser refreshes.</p>
<p>
</p>
<h2><a name="remote_audrey_browsing_and_control">Remote Audrey browsing and control</a></h2>
<p>Create a HOSTS entry to point to your audrey address (available from the
About Audrey -&gt; Provile icon on the Audrey Options menu).
For example, edit c:/WINNT/system32/drivers/etc/hosts
and add 192.168.0.101 Audrey).</p>
<p>Assuming you have already done the above AudreyOnOff hack, try these urls:</p>
<pre>
 <a href="http://audrey/Channels/.Channel00/.template/index.shtml">http://audrey/Channels/.Channel00/.template/index.shtml</a>
 <a href="http://audrey/SystemProfile.shtml">http://audrey/SystemProfile.shtml</a>
 <a href="http://audrey/cgi-bin/GetSystemValue?kcrontab">http://audrey/cgi-bin/GetSystemValue?kcrontab</a>
 <a href="http://audrey/cgi-bin/GetSystemValue?Timeserver0">http://audrey/cgi-bin/GetSystemValue?Timeserver0</a>
 <a href="http://audrey/cgi-bin/SetLEDState?1">http://audrey/cgi-bin/SetLEDState?1</a>  (2 blink, 0 off)
 <a href="http://audrey/gpio.shtml?0">http://audrey/gpio.shtml?0</a> (screen off, 3 for on)</pre>
<p>
</p>
<h2><a name="how_to_boot_audrey_to_a_mh_page">How to boot Audrey to a mh page</a></h2>
<p>From Ron Wright from some other site on 10/2001</p>
<p>I has hacking away and realized that the 
/data/XML/Channels/.countertop/TEMPLATE directory has 
the default index.shtml that loads up when Audrey 
boots. So I tried adding a refresh meta tag to this 
file and rebooted. It worked just as I had hoped it would.</p>
<p>Now it loads the intro screen for a few seconds 
(5 in my case) and then ``refreshes'' to open my control 
panel for the house. Works great and appears to be safe 
enough for my wife to use now.</p>
<p>Just add this tag to the index.shtml file mentioned 
above. I added mine just below the first meta tag:</p>
<pre>
 &lt;meta HTTP-EQUIV=&quot;refresh&quot; CONTENT=&quot;5;URL=<a href="http://192.168.0.1:8080/audrey/audrey.html">http://192.168.0.1:8080/audrey/audrey.html</a>&quot;&gt;</pre>
<p>
</p>
<h2><a name="how_to_stop_the_audrey_from_autoupating">How to stop the Audrey from auto-upating</a></h2>
<p>From Ron Wright from some other site on 10/2001</p>
<p>I have also edited the kcrontab file to keep Audrey from
trying to update her channels.  I found before doing this,
everytime she tried an update it was changing the page
back to default audrey welcome.  Also the initial reason
for the above change.  This just makes it one better.</p>
<p>Losing kcrontab entries</p>
<p>If you have the root shell hack on the audrey options panel, you can.</p>
<p>1) Get into the shell 
 cd /config
 cat kcrontab &gt;kcrontab.sav
 exit</p>
<p>2) Deselect broadband and all the download times</p>
<p>3) go back to the shell
 cd /config
 edit kcrontab.sav to save what you want
 cp kcrontab.sav kcrontab</p>
<p>All better</p>
<p>BTW My kcrontab looks like this</p>
<pre>
 -MemDefrag;15;19;*;*;*
 setitime;23;19;*;*;*
 maild;/5;*;*;*;*</pre>
<p>
</p>
<h2><a name="how_to_share_files">How to share files</a></h2>
<p>Assuming a hacked shell like DaveC-Img10-23-01, 
you can share access Windows shared folders with this command</p>
<pre>
 /nto/bin/fs-cifs -a //windows_box:ip_address:/share_name /directory user password</pre>
<p>For example:</p>
<pre>
 mkdir /mp3
 /nto/bin/fs-cifs -a //mp3_server:192.168.0.2:/mp3s /mp3 guest guest</pre>
<p>If using DaveC image, you can do this on startup by editing /kojak/remotemount.sh,
called from /kojak/go</p>
<p>
</p>
<h2><a name="how_to_play_mp3_files">How to play mp3 files</a></h2>
<p>From Tony Perrie on 10/2001:</p>
<p>Assuming a hacked shell like DaveC-Img10-23-01.</p>
<p>I setup a little shell script to start the photon player:</p>
<pre>
 export MPEGAUDIOBUFFERSIZE=300000
 export MPEGAUDIOBUFFERSTARTPERCENT=90
 export MPEGAUDIOREFILLONUNDERFLOW=YES
 phplay &amp;</pre>
<p>The default priority on fs-cifs and phplay is 19 which is the lowest.
You'll probably want to up the priority on fs-cifs and to keep the photon player
from skipping with:</p>
<pre>
 slay -P 5 fs-cifs
 slay -P 5 phplay</pre>
<p>
</p>
<h2><a name="how_to_push_speech_to_remote_audreys">How to push speech to remote Audreys</a></h2>
<p>There are 2 ways to do remotely play wav files on an Audrey.  One plays a wav file in the foreground by 
creating a popup window, the other uses playsound_noph to play wav files in the background.  
Both ways requre you first enable remote control (see 'Remote Audrey browsing and control' above).</p>
<p>To enable the foreground wav playing, add this mh.ini parm (this is the default):
</p>
<pre>

 voice_text_address_code = run 'get_url -quiet &quot;<a href="http://">http://</a>$address/cgi-bin/SendMessage?M=GOTO_URL&amp;S=$url&quot; /dev/null'</pre>
<p>Now simply use the address argument when calling speak or play.  
For example (substitute in you Audrey ip address(s)):</p>
<pre>
 speak &quot;address=192.168.0.101,kitchen Hello to the study&quot;;
 play   address =&gt; 'study', file =&gt; '../sounds/hello_from_bruce.wav';
 play   address =&gt; 'study,kitchen', file =&gt; '../sounds/hello_from_bruce.wav';</pre>
<p>To install playsound_noph, first download and unzip it from Keith Webb's site:  <a href="http://www.planetwebb.com/audrey">http://www.planetwebb.com/audrey</a> .
Note, you do not need to be running qnx.  A normal hacked Audrey works fine.</p>
<p>Next, create this a file called playsound.shtml with these records:</p>
<pre>
 &lt;html&gt;&lt;head&gt;&lt;title&gt;Shell&lt;/title&gt;&lt;/head&gt;&lt;/body&gt;
 &lt;!--#exec cmd=&quot;playsound_noph $QUERY_STRING &amp;&quot; --&gt;
 &lt;/body&gt;&lt;/html&gt;</pre>
<p>Now copy 3 files over to your Audrey(s).  
Here are the commands I used from my Audrey to copy the files from my windows house c:/temp directory: 
</p>
<pre>

 mkdir /house
 fs-cifs -a //house:192.168.0.2:/c /house guest guest
 cd /house/temp
 cp playsound_noph    /nto/photon/bin
 cp soundfile_noph.so /nto/photon/dll
 cp playsound.shtml   /data/XML</pre>
<p>Finally, add this mh.ini parm:
 
 voice_text_address_code = run 'get_url -quiet ``http://$address/playsound.shtml?$url'' /dev/null'

</p>
<p>And use the speak and play examples from above.
More examples are in mh/code/bruce/audrey.pl

</p>

</body>

</html>
